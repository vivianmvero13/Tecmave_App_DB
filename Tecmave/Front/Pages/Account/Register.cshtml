@page
@using Front.Pages.Account;
@model Front.Pages.Account.RegisterModel
@{
    ViewData["Title"] = "Login";
    Layout = "~/Pages/Shared/_AccountLayout.cshtml";
}

<div class="login-v2-right">
    <div class="login-v2-form-container">
        <div class="login-v2-form-header">
            <img src="/img/tecmave_logo_innovacion.jpg" alt="Happy Hive Logo" class="login-v2-form-logo">
            <h1>Crear Cuenta</h1>
            <p>Regístrate para acceder a todos los servicios</p>
        </div>
  <form asp-route-returnUrl="@Model.ReturnUrl" method="post" class="login-v2-form">
            <div class="login-v2-input-group">
        <label asp-for="Register.Nombre">Nombre</label>
        <input asp-for="Register.Nombre" type="text" required />
    </div>
    <div class="login-v2-input-group">
        <label asp-for="Register.Apellidos">Apellido</label>
        <input asp-for="Register.Apellidos" type="text" required />
    </div>
    <div class="login-v2-input-group">
        <label asp-for="Register.Cedula">Cédula</label>
        <input asp-for="Register.Cedula" type="text" required />
    </div>
    <div class="login-v2-input-group">
        <label asp-for="Register.Direccion">Dirección</label>
        <input asp-for="Register.Direccion" type="text" required />
    </div>
    <div class="login-v2-input-group">
        <label asp-for="Register.PhoneNumber">Teléfono</label>
        <input asp-for="Register.PhoneNumber" type="tel" required />
    </div>
    <div class="login-v2-input-group">
        <label asp-for="Register.Email">Correo Electrónico</label>
        <input asp-for="Register.Email" type="email" required />
    </div>
    <div class="login-v2-input-group">
        <label asp-for="Register.Password">Contraseña</label>
        <input asp-for="Register.Password" type="password" required minlength="8" id="password" />
        <small id="passwordHelp" style="color:red;"></small>
    </div>
    <div class="login-v2-input-group">
        <label asp-for="Register.Password2">Confirmar Contraseña</label>
        <input asp-for="Register.Password2" type="password" required minlength="8" id="password2" />
        <small id="passwordMatchHelp" style="color:red;"></small>
    </div>
    <button type="submit" class="login-v2-button">Crear Cuenta</button>
    <p>
        ¿Ya tienes cuenta?
        <a href="/Account/Login" class="login-v2-create-account"> Inicia sesion</a>
    </p>
  </form>

    </div>
</div>

<script>
  
    const passwordInput = document.getElementById("password");
    const password2Input = document.getElementById("password2");
    const passwordHelp = document.getElementById("passwordHelp");
    const passwordMatchHelp = document.getElementById("passwordMatchHelp");

    function validatePasswordStrength(password) {
        const minLength = 8;
        const hasUppercase = /[A-Z]/.test(password);
        const hasNumber = /\d/.test(password);
        const hasSpecial = /[!&#64;#$%^&*(),.?":{}|<>_]/.test(password);

        let message = "";
        if (password.length < minLength) message += `Debe tener al menos ${minLength} caracteres. `;
        if (!hasUppercase) message += "Debe tener al menos una mayúscula. ";
        if (!hasNumber) message += "Debe tener al menos un número. ";
        if (!hasSpecial) message += "Debe tener al menos un carácter especial. ";

        return message;
    }

    passwordInput.addEventListener("input", () => {
        const message = validatePasswordStrength(passwordInput.value);
        passwordHelp.textContent = message;
    });

    password2Input.addEventListener("input", () => {
        if (passwordInput.value !== password2Input.value) {
            passwordMatchHelp.textContent = "Las contraseñas no coinciden.";
        } else {
            passwordMatchHelp.textContent = "";
        }
    });

</script>